!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).MagnetMouse=t()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);function o(t){return t&&"object"===e(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function i(e,t){var n;return t&&!0===t.clone&&o(e)?c((n=e,Array.isArray(n)?[]:{}),e,t):e}function a(e,t,n){var a=e.slice();return t.forEach(function(t,s){void 0===a[s]?a[s]=i(t,n):o(t)?a[s]=c(e[s],t,n):-1===e.indexOf(t)&&a.push(i(t,n))}),a}function c(e,t,n){var s=Array.isArray(t),l=(n||{arrayMerge:a}).arrayMerge||a;return s?Array.isArray(e)?l(e,t,n):i(t,n):function(e,t,n){var a={};return o(e)&&Object.keys(e).forEach(function(t){a[t]=i(e[t],n)}),Object.keys(t).forEach(function(s){o(t[s])&&e[s]?a[s]=c(e[s],t[s],n):a[s]=i(t[s],n)}),a}(e,t,n)}this.config=c({magnet:{element:".magnet-mouse",class:"magnet-mouse-active",active:!0,distance:20,position:"center"},follow:{element:".follow-mouse",class:"follow-mouse-active"},throttle:10},t),this.elementMagnet=document.querySelectorAll(this.config.magnet.element),this.elementFollow=document.querySelectorAll(this.config.follow.element)}var o,i,a;return o=n,a=[{key:"throttle",value:function(e,t){var n,o;return function(){var i=this,a=+new Date,c=arguments;n&&a<n+t?(clearTimeout(o),o=setTimeout(function(){n=a,e.apply(i,c)},t)):(n=a,e.apply(i,c))}}},{key:"getPositionMouse",value:function(e){return{x:e.pageX,y:e.pageY}}}],(i=[{key:"getPositionElement",value:function(){var e=this,t=[];return this.elementMagnet.forEach(function(n){var o=n.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop;t.push({elem:{node:n,width:o.width,height:o.height},xMin:o.left+i-e.config.magnet.distance,xMax:o.left+i+o.width+e.config.magnet.distance,yMin:o.top+a-e.config.magnet.distance,yMax:o.top+a+o.height+e.config.magnet.distance})}),t}},{key:"magnetElement",value:function(e,t){var n=this;e.forEach(function(e){if(e.xMin<t.x&&e.xMax>t.x&&e.yMin<t.y&&e.yMax>t.y){var o,i;switch(n.config.magnet.position){case"top-left":o=t.x-(e.xMin+n.config.magnet.distance),i=t.y-(e.yMin+n.config.magnet.distance);break;case"top-right":o=t.x-(e.xMin+e.elem.width+n.config.magnet.distance),i=t.y-(e.yMin+n.config.magnet.distance);break;case"bottom-left":o=t.x-(e.xMin+n.config.magnet.distance),i=t.y-(e.yMin+e.elem.height+n.config.magnet.distance);break;case"bottom-right":o=t.x-(e.xMin+e.elem.width+n.config.magnet.distance),i=t.y-(e.yMin+e.elem.height+n.config.magnet.distance);break;case"top-center":o=t.x-(e.xMin+n.config.magnet.distance+e.elem.width/2),i=t.y-(e.yMin+n.config.magnet.distance);break;case"bottom-center":o=t.x-(e.xMin+n.config.magnet.distance+e.elem.width/2),i=t.y-(e.yMin+e.elem.height+n.config.magnet.distance);break;default:o=t.x-(e.xMin+n.config.magnet.distance+e.elem.width/2),i=t.y-(e.yMin+n.config.magnet.distance+e.elem.height/2)}e.elem.node.style.transform="translate3d("+o+"px,"+i+"px, 0)",e.elem.node.classList.add(n.config.magnet.class),n.elementFollow.length>0&&n.elementFollow.forEach(function(e){e.classList.add(n.config.follow.class)})}else e.elem.node.classList.remove(n.config.magnet.class),e.elem.node.style.transform="",n.elementFollow.length>0&&n.elementFollow.forEach(function(e){e.classList.remove(n.config.follow.class)})})}},{key:"hoverElement",value:function(e,t){var n=this;e.forEach(function(e){e.xMin<t.x&&e.xMax>t.x&&e.yMin<t.y&&e.yMax>t.y?e.elem.node.classList.add(n.config.magnet.class):e.elem.node.classList.remove(n.config.magnet.class)})}},{key:"init",value:function(){var e,t,o=this,i=this;this.resizeFunction=n.throttle(function(){t=i.getPositionElement()},i.config.throttle),this.mouseFunction=n.throttle(function(a){e=n.getPositionMouse(a),i.config.magnet.active?i.magnetElement(t,e):i.hoverElement(t,e),o.elementFollow.length>0&&o.elementFollow.forEach(function(t){t.style.transform="translate3d("+e.x+"px,"+e.y+"px, 0)"})},i.config.throttle),window.addEventListener("resize",this.resizeFunction),document.addEventListener("DOMContentLoaded",function(){t=i.getPositionElement()}),window.addEventListener("mousemove",this.mouseFunction)}},{key:"destroy",value:function(){window.removeEventListener("mousemove",this.mouseFunction),window.removeEventListener("resize",this.resizeFunction);var e=this;this.elementMagnet.forEach(function(t){t.classList.remove(e.config.magnet.class),t.style.transform=""}),this.elementFollow.forEach(function(e){e.style.opacity=0})}}])&&t(o.prototype,i),a&&t(o,a),n}()});
